<div class="fondo">
  <app-navbar></app-navbar>
  <div class="container-fluid historial">
    <div class="row">
      <mat-card class="carta text-center">
        <div class="col-md-12 ">
          <p class="fs-2 text mt-3">Historial</p>
          <br />

<!-- BUSCADOR Y FILTROS -->

            <input class="form-control me-2 bg-text-primary text-center buscador" (keyup)="onKey($event)" type="search" placeholder="Buscar" aria-label="Search">



          <br>
        </div>
        <div class="row text-center">
          <div class="col-md-12 ">
<!-- FILTRO FECHA -->
            <mat-form-field appearance="fill" class="warn fecha ms-3">
              <mat-label>Fecha</mat-label>
              <input matInput [matDatepicker]="dp"  (dateChange)="dateSeleccionado($event)"  />

              <mat-datepicker-toggle
                matSuffix
                [for]="dp"
              ></mat-datepicker-toggle>
              <mat-datepicker class="warn" #dp></mat-datepicker>
            </mat-form-field>

          </div>
        </div>
      </mat-card>
    </div>
  </div>

<!-- PRIMER MODELO DE HISTORIAL -->


  <div class="visibilidadtarjetas">
<div class="container-fluid mt-5">
  <mat-card class="carta2">
    <div class="row">
          <div class="col-md-3 mt-1">

                    <div class="list-group">
                      <div href="#" class="list-group-item list-group-item-action active" aria-current="true" *ngFor="let ElementosAMostrar of dataSource">
                        <div class="d-flex w-100 justify-content-between">
                          <h2 class=" mb-1">{{ElementosAMostrar.nombre}}</h2>
                          <small style="font-size: 15px;">{{ElementosAMostrar.created_at.substring(0,10)}}</small>
                        </div>
                        <h5>N° Serie: {{ElementosAMostrar.nserie}} </h5>
                        <p class="datoslista mb-1">Responsable: {{ElementosAMostrar.responsable}}</p>
                        <p class="datoslista mb-1">Movimiento: {{ElementosAMostrar.movimiento}}</p>
                        <input class="form-control me-2 bg-text-primary text-center comentario" type="search" placeholder="" aria-label="Search" >
                      </div>
                </div>
            </div>

  </div>
</mat-card>
</div>
</div>

<!-- SEGUNDO MODELO HISTORIAL -->
  <div class="visibilidadtabla">
    <div class="container-fluid lista historial">

      <div class="row">
        <mat-card class="carta2">
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <ng-container matColumnDef="number">
              <th mat-header-cell *matHeaderCellDef>N° Serie</th>
              <td mat-cell *matCellDef="let element">{{ element.nserie }}</td>
            </ng-container>


            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Nombre</th>
              <td mat-cell *matCellDef="let element">{{ element.nombre }}</td>
            </ng-container>

            <ng-container matColumnDef="accion">
              <th mat-header-cell *matHeaderCellDef>Movimiento</th>
              <td mat-cell *matCellDef="let element">{{ element.movimiento }}</td>
            </ng-container>

            <ng-container matColumnDef="symbol">
              <th mat-header-cell *matHeaderCellDef>Fecha</th>
              <td mat-cell *matCellDef="let element">{{ element.created_at.substring(0,10) }}</td>
            </ng-container>

            <ng-container matColumnDef="section">
              <th mat-header-cell *matHeaderCellDef>Responsable</th>
              <td mat-cell *matCellDef="let element">{{ element.responsable }}</td>
            </ng-container>

            <ng-container matColumnDef="comentario">
              <th id="thahorasi" mat-header-cell *matHeaderCellDef>Comentario</th>
              <td mat-cell *matCellDef="let element">
                <mat-form-field class="cambiatepls mt-2" appearance="outline">
                  <input  matInput [(ngModel)]="element.comentario" type="text">
                  <button (click)="guardarComentario(element.id, element.comentario)" matSuffix mat-icon-button>
                    <mat-icon>send</mat-icon>
                  </button>
                </mat-form-field></td>
            </ng-container>



            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
        </mat-card>
      </div>
    </div>
  </div>
  </div>

